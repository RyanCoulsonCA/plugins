<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    <head>
        <meta charset="utf-8" />
        <title>Back to Cart Sample</title>
        <meta content="width=device-width,initial-scale=1" name="viewport" />

        <script src="../backToCart.js"></script>
        <link rel="stylesheet" href="/plugins/436d7b79b4ead251f1914f21e5e4ca93df6114ae/plugins/acf82e459de050df418dca455acca7cfee67b8e4/plugins/5bae580fdcf5c817af14ac71906995535b720e75/plugins/3086dc75d1c75b0608a2a3fa016d3661a844628c/plugins/6c9391df943b5ee0d4e35faa0ce6de6f5baaf16a/plugins/bb492ef6a59ddc5a0f594d9631e6df50efd8affc/plugins/cc9351b3b278fdae70e6feba25f021d6cf016963/plugins/fc78a8938797f8e1b87b9e49bae766fd29ca04ba/plugins/6f8b6affdd8cff57a7b803f3e58676af20dad8b9/plugins/0afc12cd37dc8415dac524ff55891f62a86b8d9b/plugins/29874478ca2c3d31cb7881fe42b4f7b61b2dfe01/plugins/5c57f6081b33ad64dc685385b8130eef99c90100/plugins/b6cad38897f81fed3997bf08e6979257203af68a/plugins/246af37b7caad3d80c166329718c5d5244fe0c4a/plugins/872a09998dd0695b78dfdb1767ed68b205cf47de/plugins/2d41d6fc0aa11cb7eb775129c97d021ee670d19f/plugins/2139f2203cb815742ac59d637a1a707b4743ef81/plugins/90c9378da182014a893b4665d9856832c94479af/plugins/98296591948873f1ad6f656789c3e53f9c26a6e0/plugins/526dcd2f32215b0948041290d40851c955cd4f34/plugins/7d6e349d7ad880e2b22120bd57d68c592ba0606c/plugins/73792f5c10e8f7c16aee1d539d67b923c09c182e/plugins/f4bab37c4e72469d1888f165a9c0f82c6bcd199b/plugins/ee3926b3ffedd7d1d978cc1305c7a68023f48bf5/rv-styles.css" />

        <style>
            #sample-map {
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div
            id="sample-map"
            is="rv-map"
            class="myMap"
            data-rv-config="config.rcs.[lang].json"
            data-rv-langs='["en-CA", "fr-CA"]'
            data-rv-service-endpoint="http://section917.cloudapp.net:8000/"
            data-rv-keys=""
            data-rv-wait="true"
            rv-plugins="backToCart"
        >
            <noscript>
                <p>
                    This interactive map requires JavaScript. To view this content please enable JavaScript in your
                    browser or download a browser that supports it.
                </p>
                <p></p>

                <p>
                    Cette carte interactive nécessite JavaScript. Pour voir ce contenu, s'il vous plaît, activer
                    JavaScript dans votre navigateur ou télécharger un navigateur qui le prend en charge.
                </p>
            </noscript>
        </div>

        <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,Object.entries,Object.values,Array.prototype.find,Array.prototype.findIndex,Array.prototype.values,Array.prototype.includes,HTMLCanvasElement.prototype.toBlob,String.prototype.repeat,String.prototype.codePointAt,String.fromCodePoint,NodeList.prototype.@@iterator,Promise,Promise.prototype.finally"></script>
        <script src="/legacy-api.js"></script>
        <script src="/plugins/436d7b79b4ead251f1914f21e5e4ca93df6114ae/plugins/acf82e459de050df418dca455acca7cfee67b8e4/plugins/5bae580fdcf5c817af14ac71906995535b720e75/plugins/3086dc75d1c75b0608a2a3fa016d3661a844628c/plugins/6c9391df943b5ee0d4e35faa0ce6de6f5baaf16a/plugins/bb492ef6a59ddc5a0f594d9631e6df50efd8affc/plugins/cc9351b3b278fdae70e6feba25f021d6cf016963/plugins/fc78a8938797f8e1b87b9e49bae766fd29ca04ba/plugins/6f8b6affdd8cff57a7b803f3e58676af20dad8b9/plugins/0afc12cd37dc8415dac524ff55891f62a86b8d9b/plugins/29874478ca2c3d31cb7881fe42b4f7b61b2dfe01/plugins/5c57f6081b33ad64dc685385b8130eef99c90100/plugins/b6cad38897f81fed3997bf08e6979257203af68a/plugins/246af37b7caad3d80c166329718c5d5244fe0c4a/plugins/872a09998dd0695b78dfdb1767ed68b205cf47de/plugins/2d41d6fc0aa11cb7eb775129c97d021ee670d19f/plugins/2139f2203cb815742ac59d637a1a707b4743ef81/plugins/90c9378da182014a893b4665d9856832c94479af/plugins/98296591948873f1ad6f656789c3e53f9c26a6e0/plugins/526dcd2f32215b0948041290d40851c955cd4f34/plugins/7d6e349d7ad880e2b22120bd57d68c592ba0606c/plugins/73792f5c10e8f7c16aee1d539d67b923c09c182e/plugins/f4bab37c4e72469d1888f165a9c0f82c6bcd199b/plugins/ee3926b3ffedd7d1d978cc1305c7a68023f48bf5/rv-main.js"></script>

        <script>
            const baseUrl = window.location.href.split('?')[0] + '?keys={RV_LAYER_LIST}';

            /* // Example of programmatically setting the catalogue URL
            RZ.mapAdded.subscribe(function(mapi) {
                backToCart.setCatalogueUrl('sample-map', baseUrl);
            });*/

            function queryStringToJSON(q) {
                var pairs = q.search.slice(1).split('&');
                var result = {};
                pairs.forEach(function(pair) {
                    pair = pair.split('=');
                    result[pair[0]] = decodeURIComponent(pair[1] || '');
                });
                return JSON.parse(JSON.stringify(result));
            }
            // grab & process the url
            var queryStr = queryStringToJSON(document.location);
            var keys = queryStr.keys;
            if (keys) {
                // turn keys into an array, pass them to the map
                var keysArr = keys.split(',');
                RV.getMap('sample-map').restoreSession(keysArr);
            } else {
                var bookmark = queryStr.rv;
                RV.getMap('sample-map').initialBookmark(bookmark);
            }
        </script>
    </body>
</html>
